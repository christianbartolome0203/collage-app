<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Collage App</title>
<style>
body { font-family: Arial, sans-serif; background:#f4f7fb; display:flex; flex-direction:column; align-items:center; padding:20px; }
.board { display:grid; gap:6px; background:#eef2ff; padding:12px; border-radius:12px; width:600px; height:600px; grid-template-columns:repeat(3,1fr); grid-template-rows:repeat(3,1fr); }
.cell { background:#eceff6; border-radius:8px; overflow:hidden; display:flex; align-items:center; justify-content:center; cursor:pointer; border:1px solid rgba(15,23,42,0.06); }
.cell img { width:100%; height:100%; object-fit:cover; object-position:center center; }
.cell.center img { object-fit:contain; }
.center-hint { position:absolute; bottom:4px; left:4px; right:4px; font-size:11px; text-align:center; color:rgba(0,0,0,0.45); }
.library { display:flex; flex-wrap:wrap; gap:6px; max-height:180px; overflow:auto; margin-top:12px; padding:6px; border:1px solid #e2e8f0; border-radius:8px; }
.library img { width:48px; height:48px; object-fit:cover; border-radius:6px; cursor:pointer; border:1px solid #cbd5e1; }
</style>
</head>
<body>
<div class="board" id="board"></div>
<div class="library" id="library"></div>
<audio id="shuffleSound" src="https://www.soundjay.com/button/sounds/button-16.mp3"></audio>

<script>
const boardEl = document.getElementById('board');
const libraryEl = document.getElementById('library');
const shuffleSound = document.getElementById('shuffleSound');

const grid = 3;
let cells = [];

const centerImageSrc = "https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(11).jpg";

// Library images (excluding center)
const libraryURLs = [
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/08d659392_Mockup7.png",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/1b1d214df_Mockup1.png",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/55fdaf344_Mockup3.png",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/62da92f9e_Mockup8.png",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/56c98e0b1_Mockup4.png",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/9a7405c30_Mockup6.png",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/d88708189_Mockup5.png",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(1).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(10).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(2).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(3).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(4).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(5).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(6).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(8).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download%20(9).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/download.jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/ec4023f63_Mockup2.png",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/images%20(1).jpg",
"https://raw.githubusercontent.com/christianbartolome0203/collage-app/main/library/images.jpg"
];
const library = libraryURLs.map(url => { const img = new Image(); img.src = url; return img; });

// Initialize board
function init(){
  cells = Array(grid*grid).fill(null).map(()=>({ img:null, src:null }));
  renderBoard();
  renderLibrary();
}

// Render library thumbnails
function renderLibrary(){
  library.forEach(img => {
    const thumb = document.createElement('img');
    thumb.src = img.src;
    thumb.draggable = true;
    thumb.addEventListener('dragstart', e=>{
      e.dataTransfer.setData('text/plain', img.src);
    });
    libraryEl.appendChild(thumb);
  });
}

// Render board
function renderBoard(){
  const centerIndex = Math.floor(grid*grid/2);
  boardEl.innerHTML = '';
  cells.forEach((cell, i) => {
    const div = document.createElement('div');
    div.className='cell';
    if(i===centerIndex) div.classList.add('center');

    const imgEl = document.createElement('img');
    if(i===centerIndex) imgEl.src = centerImageSrc;
    else if(cell.src) imgEl.src = cell.src;
    div.appendChild(imgEl);

    // Drag & Drop for non-center
    if(i!==centerIndex){
      div.addEventListener('dragover', e=>e.preventDefault());
      div.addEventListener('drop', e=>{
        e.preventDefault();
        const src = e.dataTransfer.getData('text/plain');
        cells[i] = { img:null, src };
        renderBoard();
      });
    }

    // Click center to randomize
    if(i===centerIndex){
      div.addEventListener('click', randomizeOtherTiles);
    }

    boardEl.appendChild(div);
  });
}

// Randomize non-center tiles
function randomizeOtherTiles(){
  shuffleSound.currentTime=0;
  shuffleSound.play();

  const centerIndex = Math.floor(grid*grid/2);
  let shuffled = [...library];
  for(let i=shuffled.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [shuffled[i],shuffled[j]]=[shuffled[j],shuffled[i]];
  }
  let libIdx = 0;
  for(let i=0;i<grid*grid;i++){
    if(i!==centerIndex){
      cells[i]={ img:shuffled[libIdx], src:shuffled[libIdx].src };
      libIdx++;
    }
  }
  renderBoard();
}

// Initialize app
init();
</script>
</body>
</html>
